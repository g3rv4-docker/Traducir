!function(e){function t(t){for(var n,i,o=t[0],l=t[1],u=t[2],g=0,p=[];g<o.length;g++)i=o[g],r[i]&&p.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(c&&c(t);p.length;)p.shift()();return a.push.apply(a,u||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],n=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=s[0]))}return e}var n={},r={1:0},a=[];function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=n,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;a.push(["2YZa",0]),s()}({"+U8Q":function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new s(function(t){t(e.value)}).then(i,o)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=s("vDqi"),a=s("LvDl"),i=s("q1tI"),o=s("eO8H"),l=s("xkgm"),u=s("6gJa"),c=s("KU2F"),g=s("aUEq"),p=s("H8RE"),h=s("SEEf"),d=s("FkmL"),m=s("85kl");t.default=o.withRouter(class extends i.Component{constructor(e){super(e),this.state={isLoading:!1,isOpen:!1,strings:[]},this.loadSuggestions=this.loadSuggestions.bind(this),this.resultsReceived=this.resultsReceived.bind(this),this.refreshString=this.refreshString.bind(this)}componentDidMount(){return n(this,void 0,void 0,function*(){r.default.post("/app/api/me").then(e=>this.setState({user:e.data})).catch(e=>this.setState({user:void 0})),r.default.get("/app/api/config").then(e=>this.setState({config:e.data})).catch(e=>this.showErrorMessage(e.response.status)),r.default.get("/app/api/strings/stats").then(e=>this.setState({stats:e.data})).catch(e=>this.showErrorMessage(e.response.status));const e=location.pathname.match(/^\/string\/([0-9]+)$/);if(e)try{const t=yield r.default.get(`/app/api/strings/${e[1]}`);this.setState({currentString:t.data})}catch(e){this.showErrorMessage(e.response.status)}})}renderLogInLogOut(){const e=encodeURIComponent(location.pathname+location.search);return this.state&&this.state.user?this.state.user?i.createElement(l.NavItem,null,i.createElement(l.NavLink,{href:`/app/logout?returnUrl=${e}`},"Log out")):void 0:i.createElement(l.NavItem,null,i.createElement(l.NavLink,{href:`/app/login?returnUrl=${e}`},"Log in!"))}loadSuggestions(e){this.setState({currentString:e})}refreshString(e){return n(this,void 0,void 0,function*(){const t=a.findIndex(this.state.strings,t=>t.id===e),s=yield r.default.get(`/app/api/strings/${e}`);s.data.touched=!0;const n=this.state.strings.slice();n[t]=s.data,this.setState({currentString:s.data,strings:n});try{const e=yield r.default.get("/app/api/strings/stats");this.setState({stats:e.data})}catch(e){this.showErrorMessage(e.response.status)}})}resultsReceived(e){this.setState({isLoading:!1,strings:e})}showErrorMessage(e){"string"==typeof e?alert(e):401===e?(alert("Your session has expired... you will be redirected to the log in page"),window.location.href=`/app/login?returnUrl=${encodeURIComponent(location.pathname+location.search)}`):alert(`Unknown error. Code: ${e}`)}toggle(){this.setState({isOpen:!this.state.isOpen})}isOpen(){return this.props.location.pathname.startsWith("/string/")}onToggle(){u.default.push("/filters")}render(){return i.createElement(i.Fragment,null,i.createElement(l.Navbar,{color:"dark",dark:!0,expand:"lg",className:"fixed-top"},i.createElement("div",{className:"container"},i.createElement(o.Link,{to:"/",className:"navbar-brand d-none d-lg-block"},this.state.config&&this.state.config.friendlyName," Translations ðŸ¦„",this.state.user&&` ${this.state.user.name} (${c.userTypeToString(this.state.user.userType)})`),i.createElement(o.Link,{to:"/",className:"navbar-brand d-lg-none"},this.state.config&&this.state.config.friendlyName," Translations ðŸ¦„"),i.createElement(l.NavbarToggler,{onClick:this.toggle}),i.createElement(l.Collapse,{isOpen:this.state.isOpen,navbar:!0},i.createElement(l.Nav,{className:"ml-auto",navbar:!0},i.createElement(l.NavItem,null,i.createElement(l.NavLink,{href:"https://github.com/g3rv4/Traducir",target:"_blank"},"Source Code")),i.createElement(l.UncontrolledDropdown,{nav:!0,inNavbar:!0},i.createElement(l.DropdownToggle,{nav:!0,caret:!0},"Database"),i.createElement(l.DropdownMenu,{right:!0},i.createElement(l.DropdownItem,null,i.createElement("a",{href:"https://db.traducir.win",className:"dropdown-item",target:"_blank"},"Access the Database")),i.createElement(l.DropdownItem,null,i.createElement("a",{href:"https://github.com/g3rv4/Traducir/blob/master/docs/USING_REDASH.md",className:"dropdown-item",target:"_blank"},"Instructions")))),this.state.user&&i.createElement(l.NavItem,null,i.createElement(o.Link,{to:"/users",className:"nav-link"},"Users")),this.renderLogInLogOut())))),i.createElement("div",{className:"container"},i.createElement(o.Switch,null,i.createElement(o.Route,{path:"/users",exact:!0,render:e=>this.state.config?i.createElement(m.default,{showErrorMessage:this.showErrorMessage,currentUser:this.state.user,config:this.state.config}):null}),i.createElement(o.Route,{render:e=>i.createElement(i.Fragment,null,i.createElement(g.default,{onResultsFetched:this.resultsReceived,onLoading:()=>this.setState({isLoading:!0}),showErrorMessage:this.showErrorMessage,location:e.location}),i.createElement(o.Switch,null,i.createElement(o.Route,{path:"/",exact:!0,render:e=>this.state.stats?i.createElement(h.default,{stats:this.state.stats}):null}),0===this.state.strings.length&&i.createElement(o.Route,{path:"/string/",render:e=>this.state.stats?i.createElement(h.default,{stats:this.state.stats}):null}),i.createElement(o.Route,{render:e=>i.createElement(p.default,{results:this.state.strings,loadSuggestions:this.loadSuggestions,isLoading:this.state.isLoading})})))})),i.createElement(l.Modal,{isOpen:this.isOpen(),toggle:this.onToggle,className:"w-95 mw-100"},i.createElement(l.ModalHeader,{toggle:this.onToggle},"Suggestions"),i.createElement(l.ModalBody,null,this.state.currentString&&this.state.config&&i.createElement(d.default,{config:this.state.config,user:this.state.user,str:this.state.currentString,refreshString:this.refreshString,showErrorMessage:this.showErrorMessage})))))}})},"2YZa":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("q1tI"),r=s("i8i4"),a=s("eO8H"),i=s("+U8Q"),o=s("6gJa");r.render(n.createElement(a.Router,{history:o.default},n.createElement(i.default,null)),document.getElementById("root"))},"6gJa":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("YHGo").createBrowserHistory();t.default=n},"85kl":function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new s(function(t){t(e.value)}).then(i,o)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=s("vDqi"),a=s("q1tI"),i=s("6gJa"),o=s("hKZ4");t.default=class extends a.Component{constructor(e){super(e),this.state={users:[]}}componentDidMount(){this.refreshUsers()}refreshUsers(){return n(this,void 0,void 0,function*(){try{const e=yield r.default.get("/app/api/users");this.setState({users:e.data})}catch(e){401===e.response.status?i.default.push("/"):this.props.showErrorMessage(e.response.status)}})}updateUserType(e,t){return n(this,void 0,void 0,function*(){try{yield r.default.put("/app/api/users/change-type",{UserId:e.id,UserType:t}),this.refreshUsers()}catch(e){400===e.response.status?this.props.showErrorMessage("Error updating user type"):this.props.showErrorMessage(e.response.status)}})}render(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"m-2 text-center"},a.createElement("h2",null,"Users")),a.createElement("table",{className:"table"},a.createElement("thead",{className:"thead-light"},a.createElement("tr",null,a.createElement("th",null,"User"),a.createElement("th",null,"Role"),a.createElement("th",null,"Â "))),a.createElement("tbody",null,this.state.users.map(e=>a.createElement("tr",{key:e.id},a.createElement("td",null,a.createElement("a",{href:`https://${this.props.config.siteDomain}/users/${e.id}`,target:"_blank"},e.displayName," ",e.isModerator?"â™¦":"")),a.createElement("td",null,o.userTypeToString(e.userType)),a.createElement("td",null,this.props.currentUser&&this.props.currentUser.canManageUsers&&a.createElement("div",{className:"btn-group",role:"group"},e.userType===o.UserType.User&&a.createElement("button",{type:"button",className:"btn btn-sm btn-warning",onClick:t=>this.updateUserType(e,o.UserType.TrustedUser)},"Make trusted user"),e.userType===o.UserType.Banned&&a.createElement("button",{type:"button",className:"btn btn-sm btn-warning",onClick:t=>this.updateUserType(e,o.UserType.User)},"Lift Ban"),e.userType===o.UserType.TrustedUser&&a.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:t=>this.updateUserType(e,o.UserType.User)},"Make regular user"),e.userType!==o.UserType.Banned&&e.userType!==o.UserType.TrustedUser&&e.userType!==o.UserType.Reviewer&&!e.isModerator&&a.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:t=>this.updateUserType(e,o.UserType.Banned)},"Ban User"))))))))}}},FWOS:function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new s(function(t){t(e.value)}).then(i,o)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=s("vDqi"),a=s("q1tI"),i=s("6gJa"),o=s("RBzv"),l=s("hKZ4");var u;!function(e){e[e.Accept=1]="Accept",e[e.Reject=2]="Reject"}(u||(u={})),t.default=class extends a.Component{constructor(e){super(e),this.state={isButtonDisabled:!1}}render(){return this.props.suggestions&&this.props.suggestions.length?a.createElement("table",{className:"table mt-2"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Suggestion"),a.createElement("th",null,"Approved By"),a.createElement("th",null,"Created by"),a.createElement("th",null),a.createElement("th",null))),a.createElement("tbody",null,this.props.suggestions.map(e=>a.createElement("tr",{key:e.id,className:e.state===o.StringSuggestionState.ApprovedByTrustedUser?"table-success":""},a.createElement("td",null,a.createElement("pre",null,e.suggestion)),a.createElement("td",null,e.lastStateUpdatedByName&&a.createElement("a",{href:`https://${this.props.config.siteDomain}/users/${e.lastStateUpdatedById}`,target:"_blank"},e.lastStateUpdatedByName)),a.createElement("td",null,a.createElement("a",{href:`https://${this.props.config.siteDomain}/users/${e.createdById}`,target:"_blank",title:`at ${e.creationDate} UTC`},e.createdByName)),a.createElement("td",null,this.renderDeleteButton(e)),a.createElement("td",null,this.renderSuggestionActions(e)))))):null}renderSuggestionActions(e){return this.props.user&&this.props.user.canReview?e.state===o.StringSuggestionState.ApprovedByTrustedUser&&this.props.user.userType===l.UserType.TrustedUser?null:a.createElement("div",{className:"btn-group",role:"group"},a.createElement("button",{type:"button",className:"btn btn-sm btn-success",onClick:t=>this.processReview(e,u.Accept),disabled:this.state.isButtonDisabled},a.createElement("i",{className:"fas fa-thumbs-up"})),a.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:t=>this.processReview(e,u.Reject),disabled:this.state.isButtonDisabled},a.createElement("i",{className:"fas fa-thumbs-down"}))):null}processReview(e,t){return n(this,void 0,void 0,function*(){this.setState({isButtonDisabled:!0});try{yield r.default.put("/app/api/review",{Approve:t===u.Accept,SuggestionId:e.id}),this.props.refreshString(e.stringId),i.default.push("/filters")}catch(e){400===e.response.status?this.props.showErrorMessage("Error reviewing the suggestion. Do you have enough rights?"):this.props.showErrorMessage(e.response.status),this.setState({isButtonDisabled:!1})}})}renderDeleteButton(e){return this.props.user&&e.createdById===this.props.user.id?a.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:t=>this.processDeleteReview(e),disabled:this.state.isButtonDisabled},"DELETE"):null}processDeleteReview(e){return n(this,void 0,void 0,function*(){this.setState({isButtonDisabled:!0});try{yield r.default.delete(`/app/api/suggestions/${e.id}`),this.props.refreshString(e.stringId),this.setState({isButtonDisabled:!1})}catch(e){400===e.response.status?this.props.showErrorMessage("Error deleting the suggestion. Do you have enough rights?"):this.props.showErrorMessage(e.response.status),this.setState({isButtonDisabled:!1})}})}}},FkmL:function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new s(function(t){t(e.value)}).then(i,o)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=s("vDqi"),a=s("q1tI"),i=s("6gJa"),o=s("GAHs"),l=s("FWOS");t.default=class extends a.Component{constructor(e){super(e),this.state={rawString:!1},this.onCheckboxChange=this.onCheckboxChange.bind(this)}updateUrgency(e){return n(this,void 0,void 0,function*(){try{yield r.default.put("/app/api/manage-urgency",{IsUrgent:e,StringId:this.props.str.id}),this.props.str&&this.props.refreshString(this.props.str.id),i.default.push("/filters")}catch(e){400===e.response.status?this.props.showErrorMessage("Failed updating the urgency... maybe a race condition?"):this.props.showErrorMessage(e.response.status)}})}renderUrgency(){return this.props.user&&this.props.user.canSuggest?this.props.str.isUrgent?a.createElement("span",null,"Yes ",a.createElement("a",{href:"#",className:"btn btn-sm btn-warning",onClick:e=>this.updateUrgency(!1)},"Mark as non urgent")):a.createElement("span",null,"No ",a.createElement("a",{href:"#",className:"btn btn-sm btn-danger",onClick:e=>this.updateUrgency(!0)},"Mark as urgent")):a.createElement("span",null,this.props.str.isUrgent?"Yes":"No")}onCheckboxChange(){this.setState({rawString:!this.state.rawString})}render(){return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("span",{className:"font-weight-bold"},"Key: "),a.createElement("a",{href:`https://www.transifex.com/${this.props.config.transifexPath}/$?q=key%3A${this.props.str.key}`,target:"_blank"},this.props.str.key)),a.createElement("div",null,a.createElement("span",{className:"font-weight-bold"},"This string needs a new translation ASAP: ")," ",this.renderUrgency()),this.props.user&&this.props.user.canReview&&a.createElement("div",null,a.createElement("span",{className:"font-weight-bold"},"Raw string?: ")," ",a.createElement("input",{type:"checkbox",checked:this.state.rawString,onChange:this.onCheckboxChange})),a.createElement("div",null,a.createElement("span",{className:"font-weight-bold"},"Original String:")," ",a.createElement("pre",{className:"d-inline"},this.props.str.originalString)),this.props.str.variant&&a.createElement("div",null,a.createElement("span",{className:"font-weight-bold"},"Variant:")," ",this.props.str.variant.replace("VARIANT: ","")),a.createElement("div",null,a.createElement("span",{className:"font-weight-bold"},"Current Translation:")," ",this.props.str.translation?a.createElement("pre",{className:"d-inline"},this.props.str.translation):a.createElement("i",null,"Missing translation")),a.createElement(l.default,{user:this.props.user,config:this.props.config,suggestions:this.props.str.suggestions,refreshString:this.props.refreshString,showErrorMessage:this.props.showErrorMessage}),a.createElement(o.default,{user:this.props.user,stringId:this.props.str.id,rawString:this.state.rawString,refreshString:this.props.refreshString,showErrorMessage:this.props.showErrorMessage}))}}},GAHs:function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new s(function(t){t(e.value)}).then(i,o)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=s("vDqi"),a=s("q1tI"),i=s("6gJa"),o=s("hKZ4");var l;!function(e){e[e.CreationOk=1]="CreationOk",e[e.InvalidStringId=2]="InvalidStringId",e[e.SuggestionEqualsOriginal=3]="SuggestionEqualsOriginal",e[e.EmptySuggestion=4]="EmptySuggestion",e[e.SuggestionAlreadyThere=5]="SuggestionAlreadyThere",e[e.TooFewVariables=6]="TooFewVariables",e[e.TooManyVariables=7]="TooManyVariables",e[e.DatabaseError=8]="DatabaseError"}(l||(l={})),t.default=class extends a.Component{constructor(e){super(e),this.state={suggestion:""}}postSuggestion(e){return n(this,void 0,void 0,function*(){try{yield r.default.put("/app/api/suggestions",{Approve:e,RawString:this.props.rawString,StringId:this.props.stringId,Suggestion:this.state.suggestion}),this.props.refreshString(this.props.stringId),i.default.push("/filters")}catch(e){if(400===e.response.status)switch(e.response.data){case l.DatabaseError:this.props.showErrorMessage("A database error has ocurred, please try again.");break;case l.EmptySuggestion:this.props.showErrorMessage("You send an empty suggestion, please try to send a suggestion next time");break;case l.InvalidStringId:this.props.showErrorMessage("We couldn't find the id you send, did you need to refresh your page?");break;case l.TooFewVariables:this.props.showErrorMessage("Failed sending the suggestion. You are missing some variables");break;case l.TooManyVariables:this.props.showErrorMessage("Failed sending the suggestion. You have included unrecognized variables");break;case l.SuggestionAlreadyThere:this.props.showErrorMessage("The suggestion you are sending is already suggested. Maybe you need to refresh?");break;case l.SuggestionEqualsOriginal:this.props.showErrorMessage("The suggestion you are sending is the same as the actual translation");break;default:this.props.showErrorMessage("The server encountered an error, but we don't know what happened")}else this.props.showErrorMessage(e.response.status)}})}render(){return this.props.user&&this.props.user.canSuggest?a.createElement("form",null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"suggestion",className:"font-weight-bold"},"New Suggestion"),a.createElement("textarea",{className:"form-control",id:"suggestion",value:this.state.suggestion,onChange:e=>this.setState({suggestion:e.target.value})})))),a.createElement("div",null,a.createElement("div",{className:"mt-1"},a.createElement("div",{className:"btn-group",role:"group"},a.createElement("button",{type:"button",className:"btn btn-primary float-left",onClick:e=>this.postSuggestion(!1)},"Send new suggestion"),this.props.user.userType>=o.UserType.Reviewer&&a.createElement("button",{type:"button",className:"btn btn-warning float-left",onClick:e=>this.postSuggestion(!0)},"Send final translation"))))):null}}},H8RE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("LvDl"),r=s("q1tI"),a=s("6gJa"),i=s("RBzv");t.default=class extends r.Component{constructor(e){super(e)}renderSuggestions(e){if(!e.suggestions||!e.suggestions.length)return null;const t=n.filter(e.suggestions,e=>e.state===i.StringSuggestionState.ApprovedByTrustedUser).length,s=n.filter(e.suggestions,e=>e.state===i.StringSuggestionState.Created).length;return r.createElement(r.Fragment,null,t>0&&r.createElement("span",{className:"text-success"},t),t>0&&s>0&&r.createElement("span",null," - "),s>0&&r.createElement("span",{className:"text-danger"},s))}goToString(e){this.props.loadSuggestions(e),a.default.push(`/string/${e.id}`)}renderRows(e){return this.props.isLoading?r.createElement("tr",null,r.createElement("td",{colSpan:3,className:"text-center"},"Loading...")):0===e.length?r.createElement("tr",null,r.createElement("td",{colSpan:3,className:"text-center"},"No results (sad trombone)")):r.createElement(r.Fragment,null,e.map(e=>r.createElement("tr",{key:e.id,onClick:t=>this.goToString(e),className:e.isUrgent?"table-danger":e.touched?"table-success":""},r.createElement("td",null,e.originalString),r.createElement("td",null,e.translation),r.createElement("td",null,this.renderSuggestions(e)))))}render(){return r.createElement(r.Fragment,null,r.createElement("div",{className:"m-2 text-center"},r.createElement("h2",null,"Results ",this.props.results&&this.props.results.length>0&&!this.props.isLoading&&`(${this.props.results.length})`)),r.createElement("table",{className:"table"},r.createElement("thead",{className:"thead-light"},r.createElement("tr",null,r.createElement("th",null,"String"),r.createElement("th",null,"Translation"),r.createElement("th",null,"Suggestions"))),r.createElement("tbody",null,this.renderRows(this.props.results))))}}},KU2F:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("hKZ4");t.userTypeToString=function(e){switch(e){case n.UserType.Banned:return"Banned";case n.UserType.User:return"User";case n.UserType.TrustedUser:return"Trusted User";case n.UserType.Reviewer:return"Reviewer"}}},RBzv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Created=1]="Created",e[e.ApprovedByTrustedUser=2]="ApprovedByTrustedUser",e[e.ApprovedByReviewer=3]="ApprovedByReviewer",e[e.Rejected=4]="Rejected",e[e.DeletedByOwner=5]="DeletedByOwner",e[e.DismissedByOtherString=6]="DismissedByOtherString"}(t.StringSuggestionState||(t.StringSuggestionState={}))},SEEf:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("q1tI"),r=s("eO8H");t.default=class extends n.Component{render(){return n.createElement("div",{className:"row text-center"},n.createElement("div",{className:"col d-none d-lg-block"},n.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},n.createElement("button",{type:"button",className:"btn btn-outline-secondary",disabled:!0},this.props.stats.totalStrings," total strings"),this.props.stats.urgentStrings>0&&n.createElement(r.Link,{to:"/filters?urgencyStatus=1",className:"btn btn-danger"},this.props.stats.urgentStrings," marked as urgent"),n.createElement(r.Link,{to:"/filters?translationStatus=2",className:"btn btn-outline-danger"},this.props.stats.withoutTranslation," without translation"),n.createElement(r.Link,{to:"/filters?suggestionsStatus=3",className:"btn btn-outline-primary"},this.props.stats.waitingApproval," suggestions awaiting approval"),n.createElement(r.Link,{to:"/filters?suggestionsStatus=4",className:"btn btn-outline-success"},this.props.stats.waitingReview," approved suggestions awaiting review"))),n.createElement("div",{className:"col d-lg-none"},n.createElement("div",{className:"btn-group-vertical",role:"group","aria-label":"Basic example"},n.createElement("button",{type:"button",className:"btn btn-outline-secondary",disabled:!0},this.props.stats.totalStrings," total strings"),this.props.stats.urgentStrings>0&&n.createElement(r.Link,{to:"/filters?urgencyStatus=1",className:"btn btn-danger"},this.props.stats.urgentStrings," marked as urgent"),n.createElement(r.Link,{to:"/filters?translationStatus=2",className:"btn btn-outline-danger"},this.props.stats.withoutTranslation," without translation"),n.createElement(r.Link,{to:"/filters?suggestionsStatus=3",className:"btn btn-outline-primary"},this.props.stats.waitingApproval," suggestions awaiting approval"),n.createElement(r.Link,{to:"/filters?suggestionsStatus=4",className:"btn btn-outline-success"},this.props.stats.waitingReview," approved suggestions awaiting review"))))}}},aUEq:function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new s(function(t){t(e.value)}).then(i,o)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=s("vDqi"),a=s("LvDl"),i=s("cr+I"),o=s("q1tI"),l=s("eO8H"),u=s("6gJa");var c,g,p,h;!function(e){e[e.AnyStatus=0]="AnyStatus",e[e.DoesNotHaveSuggestions=1]="DoesNotHaveSuggestions",e[e.HasSuggestionsNeedingReview=2]="HasSuggestionsNeedingReview",e[e.HasSuggestionsNeedingApproval=3]="HasSuggestionsNeedingApproval",e[e.HasSuggestionsNeedingReviewApprovedByTrustedUser=4]="HasSuggestionsNeedingReviewApprovedByTrustedUser"}(c||(c={})),function(e){e[e.AnyStatus=0]="AnyStatus",e[e.WithTranslation=1]="WithTranslation",e[e.WithoutTranslation=2]="WithoutTranslation"}(g||(g={})),function(e){e[e.AnyStatus=0]="AnyStatus",e[e.NeedsPush=1]="NeedsPush",e[e.DoesNotNeedPush=2]="DoesNotNeedPush"}(p||(p={})),function(e){e[e.AnyStatus=0]="AnyStatus",e[e.IsUrgent=1]="IsUrgent",e[e.IsNotUrgent=2]="IsNotUrgent"}(h||(h={})),t.default=class extends o.Component{constructor(e){super(e),this.submitForm=a.debounce(()=>n(this,void 0,void 0,function*(){this.props.onLoading();try{const e=yield r.default.post("/app/api/strings/query",this.state);this.setState({hasError:!1}),this.props.onResultsFetched(e.data)}catch(e){400===e.response.status?(this.setState({hasError:!0}),this.props.onResultsFetched([])):this.props.showErrorMessage(e.response.status)}}),1e3),this.state=this.getStateFromLocation(this.props.location),this.hasFilter()||e.location.pathname.startsWith("/string")||u.default.replace("/")}hasFilter(){return this.state.sourceRegex||this.state.translationRegex||this.state.key||this.state.translationStatus||this.state.suggestionsStatus||this.state.pushStatus||this.state.urgencyStatus}componentDidMount(){this.hasFilter()&&this.submitForm()}componentWillReceiveProps(e,t){"/filters"!==e.location.pathname||e.location.search||this.hasFilter()?this.props.location.search!==e.location.search&&"/filters"!==this.props.location.pathname&&this.setState(this.getStateFromLocation(e.location),()=>{this.hasFilter()||e.location.pathname.startsWith("/string")?this.submitForm():u.default.replace("/")}):u.default.replace("/")}getStateFromLocation(e){this.props.onLoading();const t=i.parse(e.search);return{key:t.key||"",pushStatus:t.pushStatus||p.AnyStatus,sourceRegex:t.sourceRegex||"",suggestionsStatus:t.suggestionsStatus||c.AnyStatus,translationRegex:t.translationRegex||"",translationStatus:t.translationStatus||g.AnyStatus,urgencyStatus:t.urgencyStatus||h.AnyStatus}}handleField(e){this.setState(Object.assign({},e,{hasError:!1}),()=>{if(!this.hasFilter())return void u.default.replace("/");this.submitForm();const e=`/filters?${this.currentPath()}`;location.pathname.startsWith("/filters")?u.default.replace(e):u.default.push(e)})}reset(){this.setState({key:"",pushStatus:p.AnyStatus,sourceRegex:"",suggestionsStatus:c.AnyStatus,translationRegex:"",translationStatus:g.AnyStatus,urgencyStatus:h.AnyStatus},()=>{this.props.onResultsFetched([])})}currentPath(){return i.stringify(a.pickBy(this.state,e=>e))}render(){return o.createElement(o.Fragment,null,o.createElement("div",{className:"m-2 text-center"},o.createElement("h2",null,"Filters")),o.createElement("div",{className:"row"},o.createElement("div",{className:"col"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"sourceRegex"},"Source Regex"),o.createElement("input",{type:"text",className:"form-control",id:"sourceRegex",placeholder:"^question",value:this.state.sourceRegex,onChange:e=>this.handleField({sourceRegex:e.target.value})}))),o.createElement("div",{className:"col"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"translationRegex"},"Translation Regex"),o.createElement("input",{type:"text",className:"form-control",id:"translationRegex",placeholder:"(?i)pregunta$",value:this.state.translationRegex,onChange:e=>this.handleField({translationRegex:e.target.value})})))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"withoutTranslation"},"Strings without translation"),o.createElement("select",{className:"form-control",id:"withoutTranslation",value:this.state.translationStatus,onChange:e=>this.handleField({translationStatus:parseInt(e.target.value,10)})},o.createElement("option",{value:g.AnyStatus},"Any string"),o.createElement("option",{value:g.WithoutTranslation},"Only strings without translation"),o.createElement("option",{value:g.WithTranslation},"Only strings with translation")))),o.createElement("div",{className:"col"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"suggestionsStatus"},"Strings with pending suggestions"),o.createElement("select",{className:"form-control",id:"suggestionsStatus",value:this.state.suggestionsStatus,onChange:e=>this.handleField({suggestionsStatus:parseInt(e.target.value,10)})},o.createElement("option",{value:c.AnyStatus},"Any string"),o.createElement("option",{value:c.DoesNotHaveSuggestions},"Strings without suggestions"),o.createElement("option",{value:c.HasSuggestionsNeedingApproval},"Strings with suggestions awaiting approval"),o.createElement("option",{value:c.HasSuggestionsNeedingReview},"Strings with suggestions awaiting review"),o.createElement("option",{value:c.HasSuggestionsNeedingReviewApprovedByTrustedUser},"Strings with approved suggestions awaiting review"))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"key"},"Key"),o.createElement("input",{type:"text",className:"form-control",id:"key",value:this.state.key,onChange:e=>this.handleField({key:e.target.value})}))),o.createElement("div",{className:"col"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"suggestionsStatus"},"Strings with urgency status"),o.createElement("select",{className:"form-control",id:"urgencyStatus",value:this.state.urgencyStatus,onChange:e=>this.handleField({urgencyStatus:parseInt(e.target.value,10)})},o.createElement("option",{value:h.AnyStatus},"Any string"),o.createElement("option",{value:h.IsUrgent},"Is urgent"),o.createElement("option",{value:h.IsNotUrgent},"Is not urgent"))))),this.state.hasError&&o.createElement("div",{className:"row"},o.createElement("div",{className:"col"},o.createElement("div",{className:"alert alert-danger",role:"alert"},"Error when performing the filter... are the regular expressions ok?"))),o.createElement("div",{className:"row text-center mb-5"},o.createElement("div",{className:"col"},o.createElement(l.Link,{to:"/",className:"btn btn-secondary",onClick:e=>this.reset()},"Reset"))),"/filters"===location.pathname&&""===location.search&&this.hasFilter()&&o.createElement(l.Redirect,{to:{pathname:"/filters",search:this.currentPath()}}))}}},hKZ4:function(e,t,s){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.Banned=1]="Banned",e[e.User=2]="User",e[e.TrustedUser=3]="TrustedUser",e[e.Reviewer=4]="Reviewer"}(n=t.UserType||(t.UserType={})),t.userTypeToString=function(e){switch(e){case n.Unknown:return"Unknown";case n.Banned:return"Banned";case n.User:return"User";case n.TrustedUser:return"Trusted User";case n.Reviewer:return"Reviewer"}}}});
//# sourceMappingURL=index.b4e239862613dd400f3b.bundle.js.map