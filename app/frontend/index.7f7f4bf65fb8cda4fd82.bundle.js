!function(e){function t(t){for(var n,l,o=t[0],i=t[1],u=t[2],g=0,m=[];g<o.length;g++)l=o[g],a[l]&&m.push(a[l][0]),a[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(c&&c(t);m.length;)m.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,o=1;o<s.length;o++){var i=s[o];0!==a[i]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=s[0]))}return e}var n={},a={1:0},r=[];function l(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=e,l.c=n,l.d=function(e,t,s){l.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},l.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=i;r.push(["2YZa",0]),s()}({"+U8Q":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("q1tI"),a=s("vDqi"),r=s("LvDl"),l=s("aUEq"),o=s("H8RE"),i=s("FkmL"),u=s("KU2F");var c;!function(e){e[e.None=0]="None",e[e.Suggestions=1]="Suggestions"}(c=t.StringActions||(t.StringActions={})),t.default=class extends n.Component{constructor(e){super(e),this.loadSuggestions=(e=>{this.setState({action:c.Suggestions,currentString:e})}),this.goBackToResults=(e=>{if(e){const t=r.findIndex(this.state.strings,t=>t.id==e);a.default.get(`app/api/strings/${e}`).then(e=>{let s={action:c.None,strings:this.state.strings};s.strings[t]=e.data,this.setState(s)})}else this.setState({action:c.None})}),this.resultsReceived=(e=>{this.setState({strings:e})}),this.state={user:void 0,strings:[],action:c.None,currentString:null,config:null}}componentDidMount(){const e=this;a.default.post("/app/api/me",this.state).then(t=>e.setState({user:t.data})).catch(t=>e.setState({user:null})),a.default.get("/app/api/config").then(t=>e.setState({config:t.data}))}renderUser(){return this.state&&null!==this.state.user?this.state.user?n.createElement(n.Fragment,null,n.createElement("li",{className:"nav-item"},n.createElement("div",{className:"navbar-text"},this.state.user.name," (",u.userTypeToString(this.state.user.userType),") -")),n.createElement("li",null,n.createElement("a",{href:"/app/logout",className:"nav-link"},"Log out"))):void 0:n.createElement("li",{className:"nav-item"},n.createElement("a",{href:"/app/login",className:"nav-link"},"Anonymous - Log in!"))}renderBody(){return this.state.action==c.None?n.createElement(o.default,{user:this.state.user,results:this.state.strings,loadSuggestions:this.loadSuggestions}):this.state.action==c.Suggestions?n.createElement(i.default,{config:this.state.config,user:this.state.user,str:this.state.currentString,goBackToResults:this.goBackToResults}):void 0}render(){return n.createElement(n.Fragment,null,n.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark fixed-top"},n.createElement("div",{className:"container"},n.createElement("a",{className:"navbar-brand",href:"#"},this.state.config&&this.state.config.friendlyName," Translations"),n.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},n.createElement("ul",{className:"navbar-nav ml-auto"},this.renderUser())))),n.createElement("div",{className:"container"},n.createElement(l.default,{onResultsFetched:this.resultsReceived}),this.renderBody()))}}},"2YZa":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("q1tI"),a=s("i8i4"),r=s("+U8Q");a.render(n.createElement(r.default,null),document.getElementById("root"))},FWOS:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("q1tI"),a=s("vDqi"),r=s("RBzv");var l;!function(e){e[e.Accept=1]="Accept",e[e.Reject=2]="Reject"}(l||(l={})),t.default=class extends n.Component{constructor(e){super(e),this.state={aboutToReviewId:null,actionToPerform:null}}render(){return this.props.suggestions&&this.props.suggestions.length?n.createElement("table",{className:"table mt-2"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Suggestion"),n.createElement("th",null,"Approved By"),n.createElement("th",null,"Created by"),n.createElement("th",null))),n.createElement("tbody",null,this.props.suggestions.map(e=>n.createElement("tr",{key:e.id,className:e.state==r.StringSuggestionState.ApprovedByTrustedUser?"table-success":""},n.createElement("td",null,n.createElement("pre",null,e.suggestion)),n.createElement("td",null,e.lastStateUpdatedByName?n.createElement("a",{href:`https://${this.props.config.siteDomain}/users/${e.createdById}`,target:"_blank"},e.lastStateUpdatedByName):null),n.createElement("td",null,n.createElement("a",{href:`https://${this.props.config.siteDomain}/users/${e.createdById}`,target:"_blank",title:"at "+e.creationDate+" UTC"},e.createdByName)),n.createElement("td",null,this.renderSuggestionActions(e)))))):null}renderSuggestionActions(e){return this.props.user&&this.props.user.canReview?this.state.actionToPerform?this.state.aboutToReviewId!=e.id?null:n.createElement("div",{className:"text-center"},n.createElement("div",null,this.state.actionToPerform==l.Accept?"Approve":"Reject"," this suggestion?"),n.createElement("div",{className:"btn-group",role:"group"},n.createElement("button",{type:"button",className:"btn btn-sm btn-primary",onClick:t=>this.processReview(e)},"Yes"),n.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:e=>this.setState({actionToPerform:null,aboutToReviewId:null})},"No"))):n.createElement("div",{className:"btn-group",role:"group"},n.createElement("button",{type:"button",className:"btn btn-sm btn-success",onClick:t=>this.setState({actionToPerform:l.Accept,aboutToReviewId:e.id})},"Approve"),n.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:t=>this.setState({actionToPerform:l.Reject,aboutToReviewId:e.id})},"Reject")):null}processReview(e){if(!this.state.aboutToReviewId||!this.state.actionToPerform)return;const t=this;a.default.put("/app/api/review",{SuggestionId:this.state.aboutToReviewId,Approve:this.state.actionToPerform==l.Accept}).then(s=>t.props.goBackToResults(e.stringId))}}},FkmL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("q1tI"),a=s("FWOS"),r=s("GAHs");t.default=class extends n.Component{constructor(e){super(e)}render(){return n.createElement(n.Fragment,null,n.createElement("div",{className:"m-2 text-center"},n.createElement("h2",null,"Suggestions")),n.createElement("div",null,n.createElement("span",{className:"font-weight-bold"},"Key:")," ",n.createElement("pre",{className:"d-inline"},this.props.str.key)),n.createElement("div",null,n.createElement("span",{className:"font-weight-bold"},"Original String:")," ",n.createElement("pre",{className:"d-inline"},this.props.str.originalString)),this.props.str.variant?n.createElement("div",null,n.createElement("span",{className:"font-weight-bold"},"Variant:")," ",this.props.str.variant.replace("VARIANT: ","")):null,n.createElement("div",null,n.createElement("span",{className:"font-weight-bold"},"Current Translation:")," ",this.props.str.translation?n.createElement("pre",{className:"d-inline"},this.props.str.translation):n.createElement("i",null,"Missing translation")),n.createElement(a.default,{user:this.props.user,config:this.props.config,suggestions:this.props.str.suggestions,goBackToResults:this.props.goBackToResults}),n.createElement("div",{className:"mt-1 text-right"},n.createElement("button",{type:"button",className:"btn btn-secondary",onClick:e=>this.props.goBackToResults(null)},"Go back")),n.createElement(r.default,{user:this.props.user,stringId:this.props.str.id,goBackToResults:this.props.goBackToResults}))}}},GAHs:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("q1tI"),a=s("vDqi");t.default=class extends n.Component{constructor(e){super(e),this.sendSuggestion=(()=>{a.default.put("app/api/suggestions",{StringId:this.props.stringId,Suggestion:this.state.suggestion}).then(e=>this.props.goBackToResults(this.props.stringId)).catch(e=>alert("Failed sending the suggestion. Are you missing a variable?"))}),this.state={suggestion:""}}render(){return this.props.user&&this.props.user.canSuggest?n.createElement("form",null,n.createElement("div",{className:"row"},n.createElement("div",{className:"col"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"suggestion",className:"font-weight-bold"},"New Suggestion"),n.createElement("textarea",{className:"form-control",id:"suggestion",value:this.state.suggestion,onChange:e=>this.setState({suggestion:e.target.value})})))),n.createElement("div",null,n.createElement("div",{className:"mt-1"},n.createElement("button",{type:"button",className:"btn btn-primary float-left",onClick:this.sendSuggestion},"Send new suggestion"),n.createElement("button",{type:"button",className:"btn btn-secondary float-right",onClick:e=>this.props.goBackToResults(null)},"Go back")))):null}}},H8RE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("q1tI"),a=s("LvDl"),r=s("RBzv");t.default=class extends n.Component{constructor(e){super(e)}renderSuggestions(e){if(null==e.suggestions||0==e.suggestions.length)return n.createElement(n.Fragment,null);const t=a.filter(e.suggestions,e=>e.state==r.StringSuggestionState.ApprovedByTrustedUser).length,s=a.filter(e.suggestions,e=>e.state==r.StringSuggestionState.Created).length;return n.createElement(n.Fragment,null,t>0?n.createElement("span",{className:"text-success"},t):null,t>0&&s>0?n.createElement("span",null," - "):null,s>0?n.createElement("span",{className:"text-danger"},s):null)}renderActions(e){const t=a.filter(e.suggestions,e=>e.state==r.StringSuggestionState.ApprovedByTrustedUser).length,s=a.filter(e.suggestions,e=>e.state==r.StringSuggestionState.Created).length;return this.props.user&&this.props.user.canSuggest||t+s>0?n.createElement("button",{type:"button",className:"btn btn-sm btn-primary",onClick:t=>this.props.loadSuggestions(e)},"Suggestions"):null}renderRows(e){return 0==e.length?n.createElement("tr",null,n.createElement("td",{colSpan:4,className:"text-center"},"No results (sad trombone)")):n.createElement(n.Fragment,null,e.map(e=>n.createElement("tr",{key:e.id},n.createElement("td",null,e.originalString),n.createElement("td",null,e.translation),n.createElement("td",null,this.renderSuggestions(e)),n.createElement("td",null,this.renderActions(e)))))}render(){return n.createElement(n.Fragment,null,n.createElement("div",{className:"m-2 text-center"},n.createElement("h2",null,"Results")),n.createElement("table",{className:"table table-hover"},n.createElement("thead",{className:"thead-light"},n.createElement("tr",null,n.createElement("th",null,"String"),n.createElement("th",null,"Translation"),n.createElement("th",null,"Suggestions"),n.createElement("th",null))),n.createElement("tbody",null,this.renderRows(this.props.results))))}}},KU2F:function(e,t,s){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.Banned=1]="Banned",e[e.User=2]="User",e[e.TrustedUser=3]="TrustedUser",e[e.Reviewer=4]="Reviewer"}(n=t.UserType||(t.UserType={})),t.userTypeToString=function(e){switch(e){case n.Banned:return"Banned";case n.User:return"User";case n.TrustedUser:return"Trusted User";case n.Reviewer:return"Reviewer"}}},RBzv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Created=1]="Created",e[e.ApprovedByTrustedUser=2]="ApprovedByTrustedUser",e[e.ApprovedByReviewer=3]="ApprovedByReviewer",e[e.Rejected=4]="Rejected",e[e.DeletedByOwner=5]="DeletedByOwner",e[e.DismissedByOtherString=6]="DismissedByOtherString"}(t.StringSuggestionState||(t.StringSuggestionState={}))},aUEq:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("q1tI"),a=s("LvDl"),r=s("vDqi");var l,o,i;!function(e){e[e.AnyStatus=0]="AnyStatus",e[e.DoesNotHaveSuggestionsNeedingApproval=1]="DoesNotHaveSuggestionsNeedingApproval",e[e.HasSuggestionsNeedingApproval=2]="HasSuggestionsNeedingApproval",e[e.HasSuggestionsNeedingApprovalApprovedByTrustedUser=3]="HasSuggestionsNeedingApprovalApprovedByTrustedUser"}(l||(l={})),function(e){e[e.AnyStatus=0]="AnyStatus",e[e.WithTranslation=1]="WithTranslation",e[e.WithoutTranslation=2]="WithoutTranslation"}(o||(o={})),function(e){e[e.AnyStatus=0]="AnyStatus",e[e.NeedsPush=1]="NeedsPush",e[e.DoesNotNeedPush=2]="DoesNotNeedPush"}(i||(i={})),t.default=class extends n.Component{constructor(e){super(e),this.handleField=(e=>{this.setState(e),this.submitForm()}),this.submitForm=a.debounce(()=>{const e=this;r.default.post("/app/api/strings/query",this.state).then(function(t){e.props.onResultsFetched(t.data)}).catch(function(e){console.log(e)})},1e3),this.state={sourceRegex:"",translationRegex:"",translationStatus:o.AnyStatus,suggestionsStatus:l.AnyStatus}}render(){return n.createElement(n.Fragment,null,n.createElement("div",{className:"m-2 text-center"},n.createElement("h2",null,"Filters")),n.createElement("div",{className:"row"},n.createElement("div",{className:"col"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"sourceRegex"},"Source Regex"),n.createElement("input",{type:"text",className:"form-control",id:"sourceRegex",placeholder:"^question",value:this.state.sourceRegex,onChange:e=>this.handleField({sourceRegex:e.target.value})}))),n.createElement("div",{className:"col"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"translationRegex"},"Translation Regex"),n.createElement("input",{type:"text",className:"form-control",id:"translationRegex",placeholder:"(?i)pregunta$",value:this.state.translationRegex,onChange:e=>this.handleField({translationRegex:e.target.value})})))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"withoutTranslation"},"Strings without translation"),n.createElement("select",{className:"form-control",id:"withoutTranslation",value:this.state.translationStatus,onChange:e=>this.handleField({translationStatus:parseInt(e.target.value)})},n.createElement("option",{value:o.AnyStatus},"Any string"),n.createElement("option",{value:o.WithoutTranslation},"Only strings without translation"),n.createElement("option",{value:o.WithTranslation},"Only strings with translation")))),n.createElement("div",{className:"col"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"suggestionsStatus"},"Strings with pending suggestions"),n.createElement("select",{className:"form-control",id:"suggestionsStatus",value:this.state.suggestionsStatus,onChange:e=>this.handleField({suggestionsStatus:parseInt(e.target.value)})},n.createElement("option",{value:l.AnyStatus},"Any string"),n.createElement("option",{value:l.HasSuggestionsNeedingApproval},"Strings with pending suggestions"),n.createElement("option",{value:l.HasSuggestionsNeedingApprovalApprovedByTrustedUser},"Strings with pending suggestions approved by a trusted user"),n.createElement("option",{value:l.DoesNotHaveSuggestionsNeedingApproval},"Strings without pending suggestions"))))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"key"},"Key"),n.createElement("input",{type:"text",className:"form-control",id:"key",value:this.state.key,onChange:e=>this.handleField({key:e.target.value})}))),n.createElement("div",{className:"col"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"suggestionsStatus"},"Strings with pending push"),n.createElement("select",{className:"form-control",id:"pushStatus",value:this.state.pushStatus,onChange:e=>this.handleField({pushStatus:parseInt(e.target.value)})},n.createElement("option",{value:i.AnyStatus},"Any string"),n.createElement("option",{value:i.NeedsPush},"Needs push"),n.createElement("option",{value:i.DoesNotNeedPush},"Is updated"))))))}}}});